---
layout: page
title: proxmox_virtual_environment_storage_pbs
parent: Resources
subcategory: Virtual Environment
description: |-
  Manages a Proxmox Backup Server (PBS) storage in Proxmox VE.
---

# Resource: proxmox_virtual_environment_storage_pbs

Manages a Proxmox Backup Server (PBS) storage in Proxmox VE.

## Example Usage

```terraform
resource "proxmox_virtual_environment_storage_pbs" "example" {
  id        = "example-pbs"
  nodes     = ["pve"]
  server    = "pbs.example.local"
  datastore = "backup"

  username    = "pbs-user"
  password    = "pbs-password"
  fingerprint = "AA:BB:CC:DD:EE:FF"

  content = ["backup"]

  generate_encryption_key = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `datastore` (String) The name of the datastore on the Proxmox Backup Server.
- `id` (String) The unique identifier of the storage.
- `password` (String, Sensitive) The password for authenticating with the Proxmox Backup Server.
- `server` (String) The IP address or DNS name of the Proxmox Backup Server.
- `username` (String) The username for authenticating with the Proxmox Backup Server.

### Optional

- `backups` (Block, Optional) Configure backup retention settings for the storage type. (see [below for nested schema](#nestedblock--backups))
- `content` (Set of String) The content types that can be stored on this storage. Valid values: `backup` (VM backups), `images` (VM disk images), `import` (VM disk images for import), `iso` (ISO images), `rootdir` (container root directories), `snippets` (cloud-init, hook scripts, etc.), `vztmpl` (container templates).
- `disable` (Boolean) Whether the storage is disabled.
- `encryption_key` (String, Sensitive) An existing encryption key for the datastore. This is a sensitive value. Conflicts with `generate_encryption_key`.
- `fingerprint` (String) The SHA256 fingerprint of the Proxmox Backup Server's certificate.
- `generate_encryption_key` (Boolean) If set to true, Proxmox will generate a new encryption key. The key will be stored in the `generated_encryption_key` attribute. Conflicts with `encryption_key`.
- `namespace` (String) The namespace to use on the Proxmox Backup Server.
- `nodes` (Set of String) A list of nodes where this storage is available.

### Read-Only

- `encryption_key_fingerprint` (String) The SHA256 fingerprint of the encryption key currently in use.
- `generated_encryption_key` (String, Sensitive) The encryption key returned by Proxmox when `generate_encryption_key` is true.
- `shared` (Boolean) Whether the storage is shared across all nodes.

<a id="nestedblock--backups"></a>
### Nested Schema for `backups`

Optional:

- `keep_all` (Boolean) Specifies if all backups should be kept, regardless of their age. When set to true, other keep_* attributes must not be set.
- `keep_daily` (Number) The number of daily backups to keep. Older backups will be removed.
- `keep_hourly` (Number) The number of hourly backups to keep. Older backups will be removed.
- `keep_last` (Number) Specifies the number of the most recent backups to keep, regardless of their age.
- `keep_monthly` (Number) The number of monthly backups to keep. Older backups will be removed.
- `keep_weekly` (Number) The number of weekly backups to keep. Older backups will be removed.
- `keep_yearly` (Number) The number of yearly backups to keep. Older backups will be removed.
- `max_protected_backups` (Number) The maximum number of protected backups per guest. Use '-1' for unlimited.
